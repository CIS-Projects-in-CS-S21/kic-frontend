<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: TokenManager.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: TokenManager.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview A class for managing session tokens using AsyncStorage.
 */

import AsyncStorage from '@react-native-async-storage/async-storage';

export default class TokenManager {
    /**
    * Store a token using AsyncStorage.
    *
    * @async
    * @param {Object} token - The token to store.
     * @exception error catches error if item is not able to be set
    */
    storeToken = async (token) => {
        try {
            await AsyncStorage.setItem(
                'MyToken',
                 token
            );
            //console.log("Stored token: " + token);
        } catch (error) {
            console.log("Error storing token!");
            console.log(error);
        }
    }

    /**
    * Retrieve a token from AsyncStorage.
    *
    * @async
    * @return {Promise&lt;Token>} The token retrieved from storage.
    */
    getToken = async () => {
        try {
            let token = await AsyncStorage.getItem('MyToken');
            //console.log("Retrieved token successfully: " + token);
            return token
        } catch (error) {
            console.log("Error fetching token!");
            console.log(error);
        }
    }

    /**
    * Clears AsyncStorage and forgets the token.
    *
    * @async
    */
    forgetToken = async() => {
        try {
            let token = await AsyncStorage.removeItem('MyToken');
            //console.log("Removed token successfully: " + token);
            return token
        } catch (error) {
            console.log("Error removing token!");
            console.log(error);
        }
    }

    /**
    * Check if the current session is authenticated by attempting to retrieve the token.
    *
    * @return {boolean} A boolean signifying if the session is authenticated or not.
     * @exception error is caught if authentication is not able to occur
    */
    isAuthenticated = async() => {
        try {
            AsyncStorage.getItem('MyToken', (err, result) => {
                if (result != null){
                    //console.log("I have a token: " + result);
                    return true;
                }
                else{
                    console.log("My token is null: " + result)
                    return false;
                }
            });
        } catch (error) {
            console.log("I don't have a token.");
            console.log(error);
            return false;
        }
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Apr 22 2021 20:20:22 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
